(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{116:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=i.a.createContext({}),b=function(e){var t=i.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=b(e.components);return i.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},s=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=b(n),s=a,d=u["".concat(o,".").concat(s)]||u[s]||m[s]||r;return n?i.a.createElement(d,l(l({ref:t},p),{},{components:n})):i.a.createElement(d,l({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=s;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},99:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var a=n(1),i=n(6),r=(n(0),n(116));const o={id:"index",title:"Deployment",sidebar_label:"Deployment"},l={unversionedId:"deployment/deployment/index",id:"deployment/deployment/index",isDocsHomePage:!1,title:"Deployment",description:"Run main deployment script",source:"@site/docs/deployment/deployment/index.md",slug:"/deployment/deployment/index",permalink:"/docs/deployment/deployment/index",version:"current",sidebar_label:"Deployment",sidebar:"docs",previous:{title:"Configuration",permalink:"/docs/deployment/pre_deployment/configuration"},next:{title:"Post Deployment",permalink:"/docs/deployment/post_deployment/index"}},c=[{value:"Run main deployment script",id:"run-main-deployment-script",children:[]},{value:"Deploy the machine-images SDC",id:"deploy-the-machine-images-sdc",children:[]},{value:"Enable Active Directory Authentication (optional)",id:"enable-active-directory-authentication-optional",children:[]}],p={rightToc:c};function b(e){let t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"run-main-deployment-script"},"Run main deployment script"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Run ",Object(r.b)("inlineCode",{parentName:"p"},"scripts/environment-deploy.sh <stage>"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"It takes 15-20 minutes")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"After the deployment has successfully finished, take a note of its\nCloudFront URL, and the root password."),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("ul",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ul"},"This information can be retrieved later by running\n",Object(r.b)("inlineCode",{parentName:"li"},"scripts/get-info.sh <stage>"))))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"You can now log in to your deployment using the link above\nand user ",Object(r.b)("strong",{parentName:"p"},"root"),". The root user will be used only to create\nadministrative users which is covered in ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/deployment/post_deployment/index"}),"Post Deployment")))),Object(r.b)("h2",{id:"deploy-the-machine-images-sdc"},"Deploy the machine-images SDC"),Object(r.b)("p",null,"The machine-images SDC provides the ability to launch EC2 images from\nwithin the solution. The default solution installation currently provides\nSagemaker, EMR, and Linux and Windows EC2 as workspace options. The EC2 and EMR\noptions will not be available unless you have the corresponding machine images created."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: You can choose to create your own machine image if you do not wish to use the ones included in this SDC. ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Follow the steps outlined in\n",Object(r.b)("inlineCode",{parentName:"p"},"main/solution/machine-images/README.md")),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("ul",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Install Packer (",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.packer.io/"}),"https://www.packer.io/"),"). Packer is used to\ncreate a custom AMI which is then pushed to the solution deployment."),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("ul",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ul"},"Fetch the package with curl or wget, unzip it and copy\nit to ",Object(r.b)("inlineCode",{parentName:"li"},"/usr/local/bin"))))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Change directory to ",Object(r.b)("inlineCode",{parentName:"p"},"/main/solution/machine-images"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"run ",Object(r.b)("inlineCode",{parentName:"p"},"pnpx sls build-image -s <mystage>"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"This will take 15 minutes"))))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"For examples of how to build a custom AMI, see:"),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("ul",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"config/infra/packer-ec2-<platform>-workspace.json")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"config/infra/provisioners/provision-hail.sh")))))),Object(r.b)("h2",{id:"enable-active-directory-authentication-optional"},"Enable Active Directory Authentication (optional)"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Get the relying party information for AD integration (User Pool ID,\nRelying Party ID, User Pool Signing Cert etc)")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Run the script ",Object(r.b)("inlineCode",{parentName:"p"},"scripts/get-relying-party.sh")),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("ul",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ul"},"Supply the output of this script to your Active Directory\nadministrator"))),Object(r.b)("p",{parentName:"li"},"See more on adding "),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/deployment/configuration/auth/configuring_idp"}),"an IDentityProvider")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/deployment/configuration/auth/configuring_auth0"}),"Auth0"))))))}b.isMDXComponent=!0}}]);